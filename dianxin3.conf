# ============================================
# 圈X配置 - 电信充值记录代理
# ============================================
# 功能：将电信充值记录查询请求重定向到代理服务器
# 使用方法：
#   1. 修改下面的"你的服务器IP"为实际IP地址
#   2. 在圈X中添加此配置文件
#   3. 启用重写功能
# ============================================

[rewrite_local]

# 重定向电信充值记录查询到代理服务器
# 使用 307 临时重定向，保持 POST 方法和请求体
^https?:\/\/appfuwu\.189\.cn:9021\/query\/rechargeRecord url 307 http://192.168.240.68:8888/query/rechargeRecord

# 如果需要添加自定义请求头（可选）
# ^https?:\/\/appfuwu\.189\.cn:9021\/query\/rechargeRecord url request-header X-Proxy-By: QuanX

[mitm]

# MITM 主机名配置
hostname = appfuwu.189.cn

# ============================================
# 使用说明
# ============================================
#
# 1. 替换IP地址
#    将"你的服务器IP"替换为：
#    - 公网服务器：如 8.8.8.8
#    - 局域网：如 192.168.1.100
#
# 2. 确保代理服务器已启动
#    python 电信充值记录代理.py
#
# 3. 测试配置
#    在手机浏览器访问：
#    http://你的服务器IP:8888/health
#    返回 {"status":"ok"} 表示正常
#
# 4. 使用APP
#    打开电信APP，进入充值记录页面
#    自动生效，第一条记录会被删除
#
# ============================================
# 故障排查
# ============================================
#
# 如果不生效：
# 1. 检查圈X是否启用了重写功能
# 2. 检查MITM是否启用且证书已安装
# 3. 查看圈X日志是否有拦截记录
# 4. 测试代理服务器是否可访问
# 5. 检查正则表达式是否匹配URL
#
# ============================================

